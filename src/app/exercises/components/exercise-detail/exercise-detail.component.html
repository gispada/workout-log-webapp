<app-page-header
  [goBackTo]="'/' + parentUrl"
  [pageTitle]="'Exercises.AddNew' | translate"
  [rightTemplate]="actions"
></app-page-header>

<ng-container *ngrxLet="draft$ as draft">
  <div nz-row [nzGutter]="[24, 24]">
    <div nz-col nzXs="24" nzLg="12">
      <app-card>
        <app-form-item-block label="Name">
          <input type="text" nz-input [ngModel]="draft?.name" />
        </app-form-item-block>

        <app-form-item-block label="Description">
          <textarea nz-input rows="3" [ngModel]="draft?.description"></textarea>
        </app-form-item-block>

        <app-form-item-block label="Tags">
          <app-tags-list
            [tagIds]="draft?.tags"
            [interactive]="true"
            (delete)="deleteTag($event)"
            (add)="modalVisible = true"
          ></app-tags-list>
        </app-form-item-block>
      </app-card>
    </div>

    <div nz-col nzXs="24" nzLg="12">
      <app-card class="personal-records-card">
        <app-form-item-block label="Personal records">
          <exercises-personal-records></exercises-personal-records>
        </app-form-item-block>
      </app-card>
    </div>
  </div>

  <app-tag-chooser-modal
    [(visible)]="modalVisible"
    (selectTags)="addTags($event)"
    [excluded]="draft?.tags"
  ></app-tag-chooser-modal>
</ng-container>

<ng-template #actions>
  <div class="actions">
    <button nz-button>Cancel</button>
    <button nz-button *ngIf="exerciseId">Delete</button>
    <button nz-button nzType="primary">Save</button>
  </div>
</ng-template>
